<div class="page-container">
  <app-sidebar-menu></app-sidebar-menu>
  <br>

<!--    <form class="date-block" [formGroup]="filterForm">-->
<!--        <div class="date-block__list">-->
<!--            <mat-form-field>-->
<!--                <input matInput-->
<!--                       [matDatepicker]="fromDate"-->
<!--                       placeholder="From Date"-->
<!--                       formControlName="fromDate">-->
<!--                <mat-datepicker-toggle matSuffix [for]="fromDate"></mat-datepicker-toggle>-->
<!--                <mat-datepicker #fromDate></mat-datepicker>-->
<!--            </mat-form-field>-->
<!--        </div>-->
<!--        <div class="date-block__list">-->
<!--            <mat-form-field>-->
<!--                <input matInput-->
<!--                       [matDatepicker]="toDate"-->
<!--                       placeholder="To Date"-->
<!--                       formControlName="toDate">-->
<!--                <mat-datepicker-toggle matSuffix [for]="toDate"></mat-datepicker-toggle>-->
<!--                <mat-datepicker #toDate></mat-datepicker>-->
<!--            </mat-form-field>-->
<!--        </div>-->
<!--        <button mat-button color="primary" class="primary" (click)="applyFilter()">Submit</button>-->
<!--    </form>-->

    <mat-form-field>
        <input matInput [matDatepicker]="picker" placeholder="Calendar">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
    <mat-form-field color="accent">
        <input matInput (keyup)="filterText($event.target.value)" placeholder="Filter" />
    </mat-form-field>
    <div class="menu-bar">
        <button mat-button
                matTooltip="Create a new account record"
                [routerLink]="['/createNewAccount']"
                *ngIf="currentUser.role === '1'">Add Account</button>
    </div>
</div>
<div class="table-container mat-elevation-z8">
  <div class="mat-elevation-z8">
      <div class="loading-shade" *ngIf="isResultsLoading">
          <mat-spinner color="accent" *ngIf="isResultsLoading"></mat-spinner>
      </div>
  </div>
  <mat-table #table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="accountNumber">
        <mat-header-cell mat-sort-header *matHeaderCellDef>Account Number</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountNumber}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountOrder">
        <mat-header-cell mat-sort-header *matHeaderCellDef >Order</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountOrder}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountName">
        <mat-header-cell mat-sort-header *matHeaderCellDef>Account Name</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountName}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountDesc">
        <mat-header-cell mat-sort-header *matHeaderCellDef > Account Description</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountDesc}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountType">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Account Type</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountType}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountSubType">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Account SubType</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountSubType}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="normalSide">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Normal side</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.normalSide}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="accountBalance">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Account balance</mat-header-cell>
          <div  *matCellDef="let chartOfAccounts">
              <mat-cell> {{chartOfAccounts.accountBalance | currency: 'USD': "symbol": '1.2-2'}} </mat-cell>
          </div>
      </ng-container>

      <ng-container matColumnDef="accountInitBalance">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Initial Balance</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.accountInitBalance | currency: 'USD': "symbol": '1.2-2'}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="createdBy">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Created By</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.createdBy}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="createdDate">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Created On</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.createdDate | date: 'dd/MM/yyyy'}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="debit">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Debit</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.debit | currency: 'USD': "symbol": '1.2-2'}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="credit">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Credit</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.credit | currency: 'USD': "symbol": '1.2-2'}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="statement">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Statement</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.statement}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="comment">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Comment</mat-header-cell>
        <mat-cell *matCellDef="let chartOfAccounts"> {{chartOfAccounts.comment}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="activation">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Activate/Deactivate</mat-header-cell>
          <mat-cell *matCellDef="let chartOfAccounts">
              <a matTooltip="deactivate" *ngIf="chartOfAccounts.accountActive" (click)="deactivateAccount(chartOfAccounts)" class="text-danger">Deactivate</a>
              <a matTooltip="activate" *ngIf="!chartOfAccounts.accountActive" (click)="activateAccount(chartOfAccounts)" class="text-danger">Activate</a>
          </mat-cell>
      </ng-container>

      <ng-container matColumnDef="action">
        <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
        <mat-cell *matCellDef="let account">
          <button mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
              <button matTooltip="view account details" mat-menu-item [routerLink]="[account.id, 'view']">
                  <mat-icon>pageview</mat-icon>
                  <span>View</span>
              </button>
            <button matTooltip="edit the account" mat-menu-item (click)="editBtnHandler(account._id)">
              <mat-icon>edit</mat-icon>
              <span>Edit</span>
            </button>
            <button matTooltip="delete the account" mat-menu-item (click)="deleteBtnHandler(account._id)">
              <mat-icon>delete</mat-icon>
              <span>Delete</span>
            </button>
          </mat-menu>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
    <mat-paginator #paginator
                   [length]="resultsLength"
                   [showFirstLastButtons]="true"
                   [pageSize]="10"
                   [pageSizeOptions]="[5, 10, 20, 40, 60, 100]">
    </mat-paginator>
  </div>
